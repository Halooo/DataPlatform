<%- include("../include/header.html",{
    pageTitle:pageInitData.pageTitle
}) %>
<link href="/admin/js/vendors/datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" >
<link href="/admin/bower_components/metisMenu/dist/metisMenu.min.css" rel="stylesheet">
<link href="/admin/bower_components/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet">
<link href="/admin/bower_components/datatables-responsive/css/dataTables.responsive.css" rel="stylesheet">
<link href="/admin/dist/css/sb-admin-2.css" rel="stylesheet">
<link href="/admin/bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="/admin/dist/css/pageDetail_analysisIndex.css" rel="stylesheet">
<script>
$PageinitData = {
    data:<%- JSON.stringify(pageInitData)%>,
    lines:<%- JSON.stringify(pageInitData.lines) %>,
    rows:<%- JSON.stringify(rows) %>,
    now:<%= Date.now()%>,
    api:"<%= api %>"
};
</script>
<div id="page-wrapper">
    <div class="row">
    <% if (pageInitData.links.length > 0) {%>
        <div class="btn-group" style="margin-top: 8px;margin-bottom: 8px">
            <button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >
            <%
                var arr = pageInitData.links;
                var currentPageUrl = pageInitData.currentPageUrl;
                for(var i = 0; i < arr.length; i++){
                    if(arr[i].href === currentPageUrl){
                    %><%=arr[i].name%><%
                    break;
                    }
                }
            %>
            <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" >
                <% var arr = pageInitData.links %>
                <% arr.forEach(function(item){ %>
                <li><a href="<%=item.href%>"><%=item.name%></a></li>
                <% })%>
            </ul>
        </div>
    <% }%>

    <form id="topnavbar" class="navbar-form navbar-right" >
        <% var types = {'type': 'type','ver': 'ver','c': 'channel','quan': 'coupon_type'}; %>
        <% for(var key in types){ %>
            <% var arr = getType[key];if(Array.isArray(arr) && arr.length){%>
            <div class="btn-group searchDatas">
                <button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" type_query='<%= types[key] %>'>
                <%= getType[key][0] %><span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                <% arr.forEach(function(item){ %>
                    <li><a><%=item%></a></li>
                <% })%>
                </ul>
            </div>
            <%}%>
        <% } %>
        <% if(pageInitData.isSetEndTimeEleDisabled){%>
            <input style="width:230px;" size="16" type="text" no_7th="ok" no_30th="ok" no_week="ok" no_month="ok" value="" readonly class="form_datetime1" id="chartStartTime">
        <% }else {%>
            <input style="width:230px;" size="16" type="text" value="" readonly class="form_datetime1" id="chartStartTime">
        <% } %>
    </form>

    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <strong><%= pageInitData.mapTitle %></strong>
                <% if(day_type){ %>
                <div style="float:right" id="textBtn">
                    <input type="button" value="天"/>
                    <input type="button" value="周"/>
                    <input type="button" value="月"/>
                </div>
                <% } %>
            </div>
            <div class="panel-body">
                <div class="responsive" id="Echart_newUser" style="height:400px"></div>
            </div>
        </div>
    </div>

    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <strong><%= pageInitData.tableTitle %></strong>
                <p style="float:right; margin:0"><a href="javascript:;" id="userExcel">导出</a></p>
            </div>
            <div class="panel-body">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-hover" id="dataTables">
                        <thead>
                            <tr>
                                <% cols.forEach(function(col){ %>
                                    <th><%= col %></th>
                                <% }) %>
                            </tr>
                        </thead>
                        <tbody id="table"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="tableModal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">查看详情</h4>
                </div>
                <div class="modal-body">
                    <table class="table table-striped table-bordered table-hover">
                        <thead></thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn default" data-dismiss="modal">确定</button>
                </div>
            </div>
        </div>
    </div>

<%- include('../include/footer.html', {
    js:[
        '/admin/echart/build/dist/echarts-all.js',
        '/admin/js/vendors/datetimepicker/js/bootstrap-datetimepicker.js',
        '/admin/js/vendors/datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js',
        '/admin/js/mods/chartBase.js',
        '/admin/bower_components/datatables/media/js/jquery.dataTables.min.js',
        '/admin/bower_components/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.js',
        '/admin/bower_components/metisMenu/dist/metisMenu.min.js',
        '/admin/dist/js/sb-admin-2.js',
        '/admin/js/vendors/ejs.js',
        '/admin/js/conf/mychart.js'
    ]
}) %>




